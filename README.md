# 基于Python的自动化测试平台

#### 介绍
**以下是 自动化测试平台 说明，**
专为测试人员提供稳定、高效、安全的测试自动化平台，主要是简单实用，快速开发，快速部署，开发成本低，免费开源！
无论是个人、团队、或是企业，都能够使用！ 欢迎大家一起沟通，学习，我的微信号：QQ1416279053
邮箱：1416279053@qq.com

### 1. **功能介绍**
结构实现了一个基于 **Flask** 的接口测试管理系统
1.功能模块完善且支持多种业务操作，包括财务结算、数据库管理、自动化测试、
文件上传与导入、定时任务调度、用户登录与会话管理等。下面是各部分的技术架构分析：
核心：自动化测试的管理和应用

### 1. **项目目录结构**
   - **`Flask` 应用**：采用 `Flask` 框架处理 HTTP 请求、渲染 HTML 页面、提供 API 端点。
   - **模块划分**：
     - `base`: 包含基础配置、登录逻辑、数据库操作。
     - `finance`: 处理财务结算业务模块。
     - `api_test`: 执行自动化 API 测试并管理测试用例。
   - **辅助工具与依赖**：使用 `openpyxl` 处理 Excel 文件导入，`logging` 管理日志输出，`apscheduler` 处理定时任务。

### 2. **Flask 应用核心逻辑**
   - **Session 管理**：应用配置了 `secret_key` 用于加密 session 数据，并设置登录验证，确保访问控制。
   - **文件上传**：上传文件路径及允许的文件扩展名设置在 `app.config` 中，通过 `allowed_file` 函数校验文件格式，有效防范文件上传相关的安全风险。
   - **消息闪现**：使用 `flash` 提供用户反馈，将操作结果在前端展示。
   - **视图函数**：
     - **主页及功能页面**：路由 `/home`, `/finence`, `/home/mysql` 等。
     - **数据操作路由**：如 `/process`, `/fin_b2c` 等用于不同业务的处理，确保业务逻辑集中管理。
     - **文件上传与导入**：`/api/import` 路由用于 Excel 文件的上传、解析和批量导入数据。

### 3. **API 测试模块**
   - **API 测试用例管理**：通过数据库模型 `ERPCase` 进行测试用例的增删改查操作，使用 SQLAlchemy 进行 ORM 映射，便于后续操作和管理。
   - **批量测试**：提供 `/api/excute` 路由实现批量执行，支持接口测试和自动化用例管理。
   - **定时任务调度**：`apscheduler` 实现自动化定时运行，通过 `scheduled_execute_api_test` 方法调度后台任务每小时执行一次。

### 4. **数据可视化和统计报表**
   - **数据统计查询**：`get_case_statistics` 方法实现数据库统计查询，涵盖用例总数、不同应用和模块的测试用例数量、状态分布等。
   - **数据可视化**：通过 `matplotlib` 生成统计图（饼状图、条形图），并保存到静态目录，用于展示接口测试用例的状态分布。

### 5. **前端页面设计**
   - **模板文件**：前端页面采用 HTML 模板 `report.html` 和 `index.html` 等，使用 `Jinja2` 变量渲染数据。CSS 设计整洁，支持按钮样式、表格显示、分页导航等，并提供用户体验良好的交互。
   - **AJAX 和 JavaScript**：部分功能采用 JavaScript 实现交互，如批量执行操作、展开请求内容等。

### 6. **安全性设计**
   - **文件安全**：`secure_filename` 防止路径注入攻击，且支持文件扩展名验证。
   - **Session 管理**：确保用户的登录状态检测，防止未授权访问。
   - **数据库安全**：通过 SQLAlchemy 使用 ORM，减少 SQL 注入的风险。

### 7. **部署配置**
   - **日志配置**：日志级别为 `DEBUG`，便于开发时排查问题。
   - **应用端口与模式**：主程序设置在端口 666 上运行，配置 `debug=True` 便于开发调试。

### 总结
该架构通过合理的模块划分、面向对象的设计、ORM 映射、会话与文件管理、安全机制及定时调度，实现了一个结构清晰、功能全面、便于维护的接口测试管理系统。

